<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{components/layout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
</head>

<body>
    <section layout:fragment="content">
        <div class="container-lg row justify-content-center my-5 mx-auto">
            <div class="col-sm-10 col-md-6 px-4 justify-content-center">
                <form class="p-5 shadow rounded" th:action="${#mvc.url('account_signup_post').build()}" method="POST"
                    th:object="${user}">
                    <!-- <form class="p-5 shadow rounded"> -->
                    <!-- csrf_token is added automatically by thymeleaf-->
                    <h5 class="py-4">SIGN UP</h5>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <!-- <span th:text="*{firstName}?: (*{admin}? 'Admin' : #{default.username})">Sebastian</span> -->
                        <!-- <tr th:class="${row.even}? (${row.first}? 'first' : 'even') : 'odd'"> -->
                        <input type="email" class="form-control" th:field="*{email}"
                            th:classappend="${#fields.hasErrors('*')} ? (${#fields.hasErrors('email')} ? 'is-invalid' : 'is-valid') : ''">
                        <!-- <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div> -->
                        <!-- <div class="invalid-feedback" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
                        </div> -->
                        <div class="invalid-feedback" th:errors="*{email}">
                        </div>
                        <!-- <div class="valid-feedback" th:unless="${#fields.hasErrors('email')}">
                            Looks good!
                        </div> -->
                        <!-- <div class="valid-feedback">
                            Looks good!
                        </div> -->
                        <!-- <p th:if="${#fields.hasErrors('email')}" class="text-danger" th:errors="*{email}"></p> -->
                    </div>
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" class="form-control" th:field="*{username}"
                            th:classappend="${#fields.hasErrors('*')} ? (${#fields.hasErrors('username')} ? 'is-invalid' : 'is-valid') : ''">
                        <div class="invalid-feedback" th:errors="*{username}">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="password1" class="form-label">Password</label>
                        <input type="password" class="form-control" th:field="*{password1}"
                            th:classappend="${#fields.hasErrors('*')} ? (${#fields.hasErrors('password1')} ? 'is-invalid' : 'is-valid') : ''"
                            aria-describedby="passwordHelpBlock">
                        <div id="passwordHelpBlock" class="form-text">
                            Your password must be 8-20 characters long, contain letters and numbers, and must not
                            contain spaces, special characters, or emoji.
                        </div>

                    </div>
                    <div class="mb-3">
                        <label for="password2" class="form-label">Password</label>
                        <input type="password" class="form-control"
                            th:classappend="${#fields.hasErrors('*')} ? (${#fields.hasErrors('password2')} ? 'is-invalid' : 'is-valid') : ''"
                            id="password2" name="password2">
                        <div class="invalid-feedback" th:errors="*{password1}">
                        </div>
                    </div>
                    <div class="text-danger mb-5" th:text="${error}">
                        <!-- non field error -->
                    </div>
                    <button type="submit" class="btn btn-primary text-center" style="width: 100%">Signup</button>
                    <p class="mt-3 text-center">
                        Already have an account? <a th:href="${#mvc.url('account_login').build()}">Sign In</a>
                    </p>
                </form>
            </div>
        </div>
    </section>
</body>

</html>